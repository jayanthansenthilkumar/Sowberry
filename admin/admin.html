<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sowberry Academy</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../assets/script/components.js"></script>
</head>
<body data-page-type="admin" data-active-page="dashboard" data-user-name="Sowmiya">
    <!-- Sidebar Component -->
    <div id="sidebar-container"></div>
    
    <main>
        <!-- Header Component -->
        <div id="header-container"></div>
        
        <!-- Add Welcome Card -->
        <div class="welcome-section">
            <div class="welcome-card">
                <div class="welcome-content">
                    <div class="welcome-text">
                        <h1>Welcome, <span class="highlight">Sowmiya!</span></h1>
                        <p>Monitor and manage your platform activities from the admin dashboard</p>
                    </div>
                    <div class="welcome-stats">
                        <div class="stat-item floating">
                            <div class="stat-icon"><i class="ri-team-line"></i></div>
                            <div class="stat-info">
                                <h4>Total Mentors</h4>
                                <p>45</p>
                            </div>
                        </div>
                        <div class="stat-item floating delay-1">
                            <div class="stat-icon"><i class="ri-user-line"></i></div>
                            <div class="stat-info">
                                <h4>Total Students</h4>
                                <p>1,285</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="dashboard-grid">
            <div class="card animate">
                <div class="card-header">
                    <h3>Student Enrollment Trends</h3><i class="ri-line-chart-line"></i>
                </div>
                <h2 id="activeLearnersCount">0</h2>
                <div class="chart-container">
                    <canvas id="studentsChart"></canvas>
                </div>
            </div>
            <div class="card animate">
                <div class="card-header">
                    <h3>Mentor Performance</h3><i class="ri-team-line"></i>
                </div>
                <h2 id="mentorRating">4.8</h2>
                <div class="chart-container">
                    <canvas id="mentorChart"></canvas>
                </div>
            </div>
            <div class="card animate">
                <div class="card-header">
                    <h3>Course Completion Rate</h3><i class="ri-medal-line"></i>
                </div>
                <h2 id="completionRate">78%</h2>
                <div class="chart-container">
                    <canvas id="completionChart"></canvas>
                </div>
            </div>
        </div>
        <div class="activity-section">
            <div class="card animate">
                <h3>Recent Activities</h3>
                <div class="activity-list">
                    <div class="activity-item">
                        <i class="ri-user-add-line"></i>
                        <div class="activity-info">
                            <p>New Mentor Application: John Smith</p>
                            <span>30 minutes ago</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <i class="ri-flag-line"></i>
                        <div class="activity-info">
                            <p>Student Report: Technical Issue</p>
                            <span>1 hour ago</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <i class="ri-user-star-line"></i>
                        <div class="activity-info">
                            <p>Mentor Rating Update: Sarah Johnson</p>
                            <span>2 hours ago</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Add Popular Courses Card -->
            <div class="card animate">
                <h3>System Alerts</h3>
                <div class="activity-list">
                    <div class="activity-item alert-high">
                        <i class="ri-error-warning-line"></i>
                        <div class="activity-info">
                            <p>3 Pending Mentor Applications</p>
                            <span>Requires Review</span>
                        </div>
                    </div>
                    <div class="activity-item alert-medium">
                        <i class="ri-shield-check-line"></i>
                        <div class="activity-info">
                            <p>5 New Student Verifications</p>
                            <span>Awaiting Approval</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <i class="ri-question-line"></i>
                        <div class="activity-info">
                            <p>2 Support Tickets Pending</p>
                            <span>From Students</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script src="../assets/script/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sample data for charts
            const monthlyData = {
                students: [1847, 2100, 2320, 2500, 2700, 2847],
                completion: [65, 68, 72, 75, 77, 78],
                enrollments: [8500, 9600, 10400, 11200, 12000, 12583]
            };

            const labels = ['January', 'February', 'March', 'April', 'May', 'June'];

            // Common chart options
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'var(--card-bg)',
                        titleColor: 'var(--text)',
                        bodyColor: 'var(--text)',
                        borderColor: 'var(--border-color)',
                        borderWidth: 1,
                        padding: 10,
                        cornerRadius: 8
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(99, 102, 241, 0.1)'
                        }
                    },
                    x: {
                        grid: { display: false }
                    }
                }
            };
            // Create charts
            function createChart(canvasId, data, color) {
                return new Chart(document.getElementById(canvasId), {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            data: data,
                            borderColor: color,
                            backgroundColor: color + '20',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }
            // Initialize charts
            createChart('studentsChart', monthlyData.students, '#6366f1');
            createChart('completionChart', monthlyData.completion, '#8b5cf6');
            createChart('enrollmentsChart', monthlyData.enrollments, '#06b6d4');

            // Animate counter function
            function animateCounter(elementId, targetValue, duration = 2000, prefix = '', suffix = '') {
                const element = document.getElementById(elementId);
                const start = Number(element.innerText.replace(/[^0-9.-]+/g, ''));
                const increment = (targetValue - start) / (duration / 16);
                let current = start;

                const animate = () => {
                    current += increment;
                    if ((increment >= 0 && current >= targetValue) || 
                        (increment < 0 && current <= targetValue)) {
                        element.textContent = prefix + targetValue.toLocaleString() + suffix;
                    } else {
                        element.textContent = prefix + Math.round(current).toLocaleString() + suffix;
                        requestAnimationFrame(animate);
                    }
                };

                animate();
            }

            // Animate the counters
            setTimeout(() => {
                animateCounter('activeLearnersCount', 2847);
                animateCounter('learningProgressPercent', 78, 2000, '', '%');
                animateCounter('enrollmentsCount', 12583);
            }, 500);

            // Update real-time data every 5 minutes
            setInterval(() => {
                // Simulate real-time data updates
                const randomChange = () => Math.floor(Math.random() * 21) - 10; // -10 to +10

                monthlyData.students = monthlyData.students.map(val => 
                    Math.max(0, val + randomChange()));
                monthlyData.completion = monthlyData.completion.map(val => 
                    Math.min(100, Math.max(0, val + randomChange() / 10)));
                monthlyData.enrollments = monthlyData.enrollments.map(val => 
                    Math.max(0, val + randomChange() * 10));

                // Update charts
                Chart.instances.forEach(chart => chart.update());

                // Update counters
                animateCounter('activeLearnersCount', monthlyData.students[5], 1000);
                animateCounter('learningProgressPercent', monthlyData.completion[5], 1000, '', '%');
                animateCounter('enrollmentsCount', monthlyData.enrollments[5], 1000);
            }, 300000); // 5 minutes
        });
    </script>
</body>
</html>
