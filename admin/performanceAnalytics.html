<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Analytics - Sowberry Academy</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../assets/script/components.js"></script>
</head>
<body data-page-type="admin" data-active-page="analytics" data-user-name="Sowmiya">
    <!-- Sidebar Component -->
    <div id="sidebar-container"></div>

    <main>
        <!-- Header Component -->
        <div id="header-container"></div>

        <div class="welcome-section">
            <div class="welcome-card">
                <div class="welcome-content">
                    <div class="welcome-text">
                        <h1>Performance Analytics</h1>
                        <p>Track and analyze platform performance metrics</p>
                    </div>
                    <div class="welcome-stats">
                        <div class="stat-item floating">
                            <div class="stat-icon"><i class="ri-line-chart-line"></i></div>
                            <div class="stat-info">
                                <h4>Average Score</h4>
                                <p>85%</p>
                            </div>
                        </div>
                        <div class="stat-item floating delay-1">
                            <div class="stat-icon"><i class="ri-funds-line"></i></div>
                            <div class="stat-info">
                                <h4>Growth Rate</h4>
                                <p>+12.5%</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-wrapper">
            <!-- Time Range Filter -->
            <div class="filter-container">
                <button class="filter-btn active">Last Week</button>
                <button class="filter-btn">Last Month</button>
                <button class="filter-btn">Last Quarter</button>
                <button class="filter-btn">Last Year</button>
                <button class="filter-btn">Custom Range</button>
            </div>
            <!-- Analytics Grid -->
            <div class="dashboard-grid">
                <!-- Enrollment Trends -->
                <div class="card">
                    <div class="card-header">
                        <h3>Enrollment Trends</h3>
                        <i class="ri-line-chart-line"></i>
                    </div>
                    <div class="chart-container">
                        <canvas id="enrollmentChart"></canvas>
                    </div>
                </div>

                <!-- Course Completion Rates -->
                <div class="card">
                    <div class="card-header">
                        <h3>Completion Rates</h3>
                        <i class="ri-pie-chart-line"></i>
                    </div>
                    <div class="chart-container">
                        <canvas id="completionChart"></canvas>
                    </div>
                </div>

                <!-- Student Engagement -->
                <div class="card">
                    <div class="card-header">
                        <h3>Student Engagement</h3>
                        <i class="ri-bar-chart-line"></i>
                    </div>
                    <div class="chart-container">
                        <canvas id="engagementChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Detailed Analytics Section -->
            <div class="activity-section">
                <div class="card">
                    <h3>Performance Metrics</h3>
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <div class="metric-icon">
                                <i class="ri-time-line"></i>
                            </div>
                            <div class="metric-info">
                                <h4>Average Learning Time</h4>
                                <p>4.5 hours/week</p>
                            </div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-icon">
                                <i class="ri-trophy-line"></i>
                            </div>
                            <div class="metric-info">
                                <h4>Certification Rate</h4>
                                <p>78%</p>
                            </div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-icon">
                                <i class="ri-feedback-line"></i>
                            </div>
                            <div class="metric-info">
                                <h4>Student Satisfaction</h4>
                                <p>4.8/5.0</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Top Performing Courses</h3>
                    <div class="ranking-list">
                        <div class="ranking-item">
                            <span class="rank">1</span>
                            <div class="ranking-info">
                                <h4>Web Development Masterclass</h4>
                                <p>95% completion rate</p>
                            </div>
                            <div class="ranking-score">
                                <i class="ri-star-fill"></i>
                                4.9
                            </div>
                        </div>
                        <!-- Add more ranking items -->
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <script src="../assets/script/app.js"></script>
    <script>
        // Initialize charts when the document is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Get CSS variables
            const style = getComputedStyle(document.documentElement);
            const primaryColor = style.getPropertyValue('--primary').trim();
            const secondaryColor = style.getPropertyValue('--secondary').trim();

            // Helper function to add alpha to hex color
            const addAlpha = (color, alpha) => {
                if(color.startsWith('#')) {
                    const r = parseInt(color.slice(1, 3), 16);
                    const g = parseInt(color.slice(3, 5), 16);
                    const b = parseInt(color.slice(5, 7), 16);
                    return `rgba(${r}, ${g}, ${b}, ${alpha})`;
                }
                return color;
            };

            // Sample data and chart configurations
            const enrollmentData = {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Enrollments',
                    data: [150, 200, 250, 300, 350, 400],
                    borderColor: primaryColor,
                    backgroundColor: addAlpha(primaryColor, 0.1),
                    fill: true,
                    tension: 0.4
                }]
            };

            const completionData = {
                labels: ['Completed', 'In Progress', 'Not Started'],
                datasets: [{
                    data: [65, 25, 10],
                    backgroundColor: [
                        '#10b981',  // Success green
                        addAlpha(primaryColor, 0.8),  // Primary with alpha
                        addAlpha(secondaryColor, 0.5)  // Secondary with alpha
                    ]
                }]
            };

            const engagementData = {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Hours Spent',
                    data: [4.5, 5.2, 3.8, 4.9, 5.5, 3.2, 2.8],
                    backgroundColor: addAlpha(primaryColor, 0.8)
                }]
            };

            // Common chart options with better styling
            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: addAlpha(primaryColor, 0.1)
                        }
                    },
                    y: {
                        grid: {
                            color: addAlpha(primaryColor, 0.1)
                        }
                    }
                }
            };

            // Create charts
            new Chart(document.getElementById('enrollmentChart'), {
                type: 'line',
                data: enrollmentData,
                options: {
                    ...commonOptions,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            new Chart(document.getElementById('completionChart'), {
                type: 'doughnut',
                data: completionData,
                options: {
                    ...commonOptions,
                    cutout: '70%'
                }
            });

            new Chart(document.getElementById('engagementChart'), {
                type: 'bar',
                data: engagementData,
                options: commonOptions
            });
        });
    </script>
</body>
</html>
