import{b as v,r as c,j as e,d as h,c as p,S as d,g as o}from"./index-Ci2oCG6z.js";import{A as P}from"./AdminLayout-DUJX2VlJ.js";const E=()=>{const{user:n,updateUser:y}=v(),[x,f]=c.useState("profile"),[l,b]=c.useState({fullName:"",email:"",phone:"",username:""}),[t,g]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,u]=c.useState({}),[i,m]=c.useState(!1);c.useEffect(()=>{n&&b({fullName:n.fullName||"",email:n.email||"",phone:n.phone||"",username:n.username||""}),(async()=>{const a=await h.getSettings();a.success&&u(a.settings||{})})()},[n]);const w=async r=>{r.preventDefault(),m(!0);const a=await p.updateProfile(l);a.success?(y(a.user),d.fire({...o(),icon:"success",title:"Profile Updated!",timer:1500,showConfirmButton:!1})):d.fire({...o(),icon:"error",title:"Error",text:a.message}),m(!1)},j=async r=>{if(r.preventDefault(),t.newPassword!==t.confirmPassword){d.fire({...o(),icon:"warning",title:"Mismatch",text:"Passwords do not match"});return}m(!0);const a=await p.changePassword({currentPassword:t.currentPassword,newPassword:t.newPassword});a.success?(d.fire({...o(),icon:"success",title:"Password Changed!",timer:1500,showConfirmButton:!1}),g({currentPassword:"",newPassword:"",confirmPassword:""})):d.fire({...o(),icon:"error",title:"Error",text:a.message}),m(!1)},k=async r=>{r.preventDefault(),m(!0);const a=await h.updateSettings({settings:s});a.success?d.fire({...o(),icon:"success",title:"Settings Saved!",timer:1500,showConfirmButton:!1}):d.fire({...o(),icon:"error",title:"Error",text:a.message}),m(!1)},N=[{id:"profile",label:"Profile",icon:"ri-user-line"},{id:"password",label:"Password",icon:"ri-lock-line"},{id:"platform",label:"Platform",icon:"ri-settings-line"}];return e.jsx(P,{pageTitle:"Settings",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:"Settings"}),e.jsx("div",{className:"flex gap-1 bg-white dark-theme:bg-gray-900 rounded-xl p-1 border border-sand dark-theme:border-gray-800 w-fit",children:N.map(r=>e.jsxs("button",{onClick:()=>f(r.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x===r.id?"bg-primary text-white":"text-gray-500 hover:bg-gray-50 dark-theme:hover:bg-gray-800"}`,children:[e.jsx("i",{className:r.icon}),r.label]},r.id))}),x==="profile"&&e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 border border-sand dark-theme:border-gray-800 max-w-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100 mb-5",children:"Profile Information"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:l.fullName,onChange:r=>b({...l,fullName:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:l.email,disabled:!0,className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 outline-none text-sm opacity-60 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:l.phone,onChange:r=>b({...l,phone:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark disabled:opacity-60",children:i?"Saving...":"Save Changes"})]})]}),x==="password"&&e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 border border-sand dark-theme:border-gray-800 max-w-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100 mb-5",children:"Change Password"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",required:!0,value:t.currentPassword,onChange:r=>g({...t,currentPassword:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"New Password"}),e.jsx("input",{type:"password",required:!0,value:t.newPassword,onChange:r=>g({...t,newPassword:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",required:!0,value:t.confirmPassword,onChange:r=>g({...t,confirmPassword:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark disabled:opacity-60",children:i?"Changing...":"Change Password"})]})]}),x==="platform"&&e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 border border-sand dark-theme:border-gray-800 max-w-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100 mb-5",children:"Platform Settings"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Site Name"}),e.jsx("input",{type:"text",value:s.siteName||"Sowberry",onChange:r=>u({...s,siteName:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Support Email"}),e.jsx("input",{type:"email",value:s.supportEmail||"",onChange:r=>u({...s,supportEmail:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Max Students Per Course"}),e.jsx("input",{type:"number",value:s.maxStudentsPerCourse||100,onChange:r=>u({...s,maxStudentsPerCourse:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s.maintenanceMode==="true"||s.maintenanceMode===!0,onChange:r=>u({...s,maintenanceMode:r.target.checked?"true":"false"}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("label",{className:"text-sm text-gray-600 dark-theme:text-gray-400",children:"Maintenance Mode"})]}),e.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark disabled:opacity-60",children:i?"Saving...":"Save Settings"})]})]})]})})};export{E as default};
