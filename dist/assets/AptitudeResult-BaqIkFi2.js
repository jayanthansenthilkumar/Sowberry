import{f as $,r as a,j as e,L as y,s as R}from"./index-mbJjgMST.js";import{D as n}from"./DashboardLayout-B1KlLbJt.js";const S=()=>{const{attemptId:i}=$(),[j,k]=a.useState(null),[f,N]=a.useState(!0),[c,o]=a.useState(null);if(a.useEffect(()=>{(async()=>{try{const r=await R.getAptitudeResult(i);r.success?k(r.data):o(r.message)}catch{o("Failed to load results.")}N(!1)})()},[i]),f)return e.jsx(n,{pageTitle:"Test Results",role:"student",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-primary"})})});if(c)return e.jsx(n,{pageTitle:"Test Results",role:"student",children:e.jsxs("div",{className:"text-center py-20 text-red-500",children:[e.jsx("i",{className:"ri-error-warning-line text-4xl mb-3 block"}),e.jsx("p",{children:c}),e.jsx(y,{to:"/student/aptitude-tests",className:"mt-4 inline-block px-4 py-2 bg-primary text-white rounded-xl",children:"Back to Tests"})]})});const{attempt:v,results:w,score:x,total:m,answered:g,questions:u}=j,h=Math.round(x/m*100);return e.jsx(n,{pageTitle:"Test Results",role:"student",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-800 dark-theme:text-gray-100",children:[v.title," â€” Results"]}),e.jsxs(y,{to:"/student/aptitude-tests",className:"px-4 py-2 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 text-gray-500 dark-theme:text-gray-400 text-sm hover:bg-cream-dark dark-theme:hover:bg-gray-700 transition-colors",children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Back to Tests"]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Score",value:`${x}/${m}`,icon:"ri-medal-line",color:h>=70?"text-green-400":"text-amber-400"},{label:"Percentage",value:`${h}%`,icon:"ri-percent-line",color:"text-primary"},{label:"Answered",value:`${g}/${u}`,icon:"ri-checkbox-circle-line",color:"text-blue-400"},{label:"Skipped",value:`${u-g}`,icon:"ri-skip-forward-line",color:"text-gray-500 dark-theme:text-gray-400"}].map((t,r)=>e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-4 border border-sand dark-theme:border-gray-800 text-center",children:[e.jsx("i",{className:`${t.icon} text-xl ${t.color} block mb-1`}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100",children:t.value}),e.jsx("p",{className:"text-[10px] text-gray-500 dark-theme:text-gray-400",children:t.label})]},r))}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500 dark-theme:text-gray-500",children:"Review Answers"}),w.map((t,r)=>{const l=t.selectedOption,b=t.isCorrect;return e.jsxs("div",{className:`bg-white dark-theme:bg-gray-900 rounded-2xl p-5 border ${b?"border-green-500/30":l?"border-red-500/30":"border-sand dark-theme:border-gray-800"}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("span",{className:`w-7 h-7 rounded-lg flex items-center justify-center text-xs font-bold flex-shrink-0 ${b?"bg-green-500/15 text-green-400":l?"bg-red-500/15 text-red-400":"bg-cream-dark dark-theme:bg-gray-800 text-gray-500 dark-theme:text-gray-400"}`,children:r+1}),e.jsx("p",{className:"text-sm text-gray-800 dark-theme:text-gray-100 font-medium",children:t.question})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 ml-10",children:["A","B","C","D"].map(s=>{const d=s===t.correctOption,p=s===l;return e.jsxs("div",{className:`p-3 rounded-xl text-xs border transition-all ${d?"border-green-500 bg-green-500/10 text-green-400 font-medium":p?"border-red-500 bg-red-500/10 text-red-400":"border-sand dark-theme:border-gray-800 text-gray-500 dark-theme:text-gray-500"}`,children:[e.jsxs("span",{className:"font-bold mr-2",children:[s,"."]}),t[`option${s}`],d&&e.jsx("i",{className:"ri-check-line ml-2 text-green-400"}),p&&!d&&e.jsx("i",{className:"ri-close-line ml-2 text-red-400"})]},s)})}),t.explanation&&e.jsx("div",{className:"ml-10 mt-3 p-3 rounded-xl bg-blue-500/5 border border-blue-500/10",children:e.jsxs("p",{className:"text-[11px] text-blue-400",children:[e.jsx("i",{className:"ri-lightbulb-line mr-1"}),e.jsx("strong",{children:"Explanation:"})," ",t.explanation]})})]},r)})]})]})})};export{S as default};
