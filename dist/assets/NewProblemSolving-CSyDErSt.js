import{r as a,j as e,m as i,S as c,g as u}from"./index-CMem4MGR.js";import{A as w}from"./AdminLayout-C4jwOaZp.js";const S=()=>{const[d,b]=a.useState([]),[h,x]=a.useState(!0),[y,l]=a.useState(!1),[o,p]=a.useState(null),[r,s]=a.useState({title:"",description:"",difficulty:"easy",category:"",inputFormat:"",outputFormat:"",constraints:"",sampleInput:"",sampleOutput:""}),m=async()=>{x(!0);const t=await i.getProblems();t.success&&b(t.problems||[]),x(!1)};a.useEffect(()=>{m()},[]);const f=()=>{p(null),s({title:"",description:"",difficulty:"easy",category:"",inputFormat:"",outputFormat:"",constraints:"",sampleInput:"",sampleOutput:""}),l(!0)},j=t=>{p(t),s({title:t.title,description:t.description||"",difficulty:t.difficulty||"easy",category:t.category||"",inputFormat:t.inputFormat||"",outputFormat:t.outputFormat||"",constraints:t.constraints||"",sampleInput:t.sampleInput||"",sampleOutput:t.sampleOutput||""}),l(!0)},v=async t=>{t.preventDefault();const n=o?await i.updateProblem(o.id,r):await i.createProblem(r);n.success?(c.fire({...u(),icon:"success",title:o?"Updated!":"Created!",timer:1500,showConfirmButton:!1}),l(!1),m()):c.fire({...u(),icon:"error",title:"Error",text:n.message})},N=t=>{c.fire({...u(),title:"Delete Problem?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",confirmButtonText:"Delete"}).then(async n=>{n.isConfirmed&&(await i.deleteProblem(t),m())})},g={easy:"bg-green-100 text-green-700",medium:"bg-amber-100 text-amber-700",hard:"bg-red-100 text-red-700"};return e.jsxs(w,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:"Coding Problems"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[d.length," problems"]})]}),e.jsxs("button",{onClick:f,className:"px-4 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark flex items-center gap-2",children:[e.jsx("i",{className:"ri-add-line"}),"New Problem"]})]}),h?null:d.length===0?e.jsxs("div",{className:"text-center py-20 text-gray-400",children:[e.jsx("i",{className:"ri-code-s-slash-line text-4xl mb-3 block"}),e.jsx("p",{children:"No problems yet"})]}):e.jsx("div",{className:"space-y-3",children:d.map(t=>e.jsx("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-5 border border-sand dark-theme:border-gray-800 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx("i",{className:"ri-code-s-slash-line text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark-theme:text-gray-100 text-sm",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${g[t.difficulty]||g.easy}`,children:t.difficulty}),t.category&&e.jsx("span",{className:"text-xs text-gray-400",children:t.category})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(t),className:"px-3 py-1.5 rounded-lg bg-blue-50 text-xs text-blue-600 hover:bg-blue-100",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>N(t.id),className:"px-3 py-1.5 rounded-lg bg-red-50 text-xs text-red-600 hover:bg-red-100",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})},t.id))})]}),y&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 w-full max-w-lg mx-4 border border-sand dark-theme:border-gray-800 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100",children:[o?"Edit":"New"," Problem"]}),e.jsx("button",{onClick:()=>l(!1),className:"w-8 h-8 rounded-lg hover:bg-gray-100 flex items-center justify-center",children:e.jsx("i",{className:"ri-close-line text-lg text-gray-500"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Problem Title",required:!0,value:r.title,onChange:t=>s({...r,title:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("textarea",{placeholder:"Description",rows:3,value:r.description,onChange:t=>s({...r,description:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm resize-none"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("select",{value:r.difficulty,onChange:t=>s({...r,difficulty:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]}),e.jsx("input",{type:"text",placeholder:"Category",value:r.category,onChange:t=>s({...r,category:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsx("input",{type:"text",placeholder:"Constraints",value:r.constraints,onChange:t=>s({...r,constraints:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("textarea",{placeholder:"Sample Input",rows:2,value:r.sampleInput,onChange:t=>s({...r,sampleInput:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm resize-none font-mono text-xs"}),e.jsx("textarea",{placeholder:"Sample Output",rows:2,value:r.sampleOutput,onChange:t=>s({...r,sampleOutput:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm resize-none font-mono text-xs"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-2.5 rounded-xl border border-sand text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark",children:o?"Update":"Create"})]})]})]})})]})};export{S as default};
