import{r,j as t,s as c,S as n,g as i}from"./index-Ci2oCG6z.js";import{D as h}from"./DashboardLayout-DRLhpPhO.js";import{D as f}from"./DataTable-Bd7QzLZh.js";import"./exportData-BhRp0csh.js";import"./jspdf.es.min-Do-SSO7r.js";const D=()=>{const[u,x]=r.useState([]),[g,l]=r.useState(!0),[o,d]=r.useState(null),m=async()=>{l(!0);const e=await c.getAssignments();e.success&&x(e.assignments||[]),l(!1)};r.useEffect(()=>{m()},[]);const p=async e=>{const{value:s}=await n.fire({...i(),title:`Submit: ${e.title}`,input:"textarea",inputPlaceholder:"Paste your answer or solution here...",showCancelButton:!0,confirmButtonText:"Submit",confirmButtonColor:"#6366f1",inputValidator:a=>!a&&"Please enter your submission"});if(s){d(e.id);const a=await c.submitAssignment(e.id,{content:s});d(null),a.success?(n.fire({...i(),icon:"success",title:"Submitted!",timer:1500,showConfirmButton:!1}),m()):n.fire({...i(),icon:"error",title:"Error",text:a.message})}},b=e=>{const s={pending:"bg-amber-500/15 text-amber-400",submitted:"bg-blue-500/15 text-blue-400",graded:"bg-green-500/15 text-green-400",late:"bg-red-500/15 text-red-400"};return s[e]||s.pending},y=[{key:"title",label:"Assignment",sortable:!0,render:(e,s)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-9 h-9 rounded-xl bg-primary/10 flex items-center justify-center flex-shrink-0",children:t.jsx("i",{className:"ri-task-line text-primary text-sm"})}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-gray-800 dark-theme:text-gray-100 text-sm",children:s.title}),s.feedback&&t.jsxs("p",{className:"text-[10px] text-green-600 dark-theme:text-green-400 mt-0.5",children:[t.jsx("i",{className:"ri-chat-1-line mr-0.5"}),s.feedback]})]})]}),exportValue:e=>e.title},{key:"courseName",label:"Course",sortable:!0,render:e=>e||"Course"},{key:"dueDate",label:"Due Date",sortable:!0,render:e=>e?new Date(e).toLocaleDateString():"No deadline",exportValue:e=>e.dueDate?new Date(e.dueDate).toLocaleDateString():"No deadline"},{key:"maxScore",label:"Max Score",sortable:!0,render:e=>t.jsxs("span",{className:"font-medium",children:[e||100," pts"]}),exportValue:e=>e.maxScore||100},{key:"grade",label:"Grade",sortable:!0,visible:!0,render:e=>e!=null?t.jsx("span",{className:"text-green-600 font-medium",children:e}):t.jsx("span",{className:"text-gray-400",children:"—"}),exportValue:e=>e.grade??"—"},{key:"status",label:"Status",sortable:!0,render:e=>t.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-medium ${b(e)}`,children:e||"pending"}),exportValue:e=>e.status||"pending"},{key:"actions",label:"Action",render:(e,s)=>!s.status||s.status==="pending"?t.jsx("button",{onClick:a=>{a.stopPropagation(),p(s)},disabled:o===s.id,className:"px-4 py-2 rounded-xl bg-primary text-white text-xs font-medium hover:bg-primary-dark disabled:opacity-50 transition-colors",children:o===s.id?"Submitting...":"Submit"}):t.jsx("span",{className:"text-xs text-gray-400",children:"—"})}];return t.jsx(h,{pageTitle:"My Assignments",role:"student",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:"My Assignments"}),t.jsx(f,{columns:y,data:u,loading:g,searchPlaceholder:"Search assignments...",storageKey:"sowberry_assignments_cols",exportTitle:"My Assignments Report",exportFileName:"Sowberry_My_Assignments",emptyIcon:"ri-task-line",emptyMessage:"No assignments yet"})]})})};export{D as default};
