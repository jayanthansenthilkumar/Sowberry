import{u as $,r as a,j as e,s as x,S as o,g as n}from"./index-CHjF_dAl.js";import{D as L}from"./DashboardLayout-Dnq7Jnl_.js";const f={"Web Development":"from-blue-500 to-indigo-500","Data Structures":"from-violet-500 to-purple-500",Python:"from-green-500 to-emerald-500","Machine Learning":"from-orange-500 to-red-500",Database:"from-amber-500 to-yellow-500",Programming:"from-cyan-500 to-blue-500","Software Engineering":"from-teal-500 to-cyan-500",General:"from-gray-500 to-gray-600"},G=()=>{const j=$(),[s,N]=a.useState([]),[i,v]=a.useState([]),[w,u]=a.useState(!0),[g,p]=a.useState("enrolled"),[d,k]=a.useState(""),[c,C]=a.useState("All"),h=async()=>{u(!0);const[r,t]=await Promise.all([x.getCourses(),x.browseCourses()]);r.success&&N(r.courses||[]),t.success&&v(t.courses||[]),u(!1)};a.useEffect(()=>{h()},[]);const S=async r=>{const t=await x.enrollCourse(r);t.success?(o.fire({...n(),icon:"success",title:"Enrolled!",text:"You have been enrolled in the course.",timer:1500,showConfirmButton:!1}),h()):o.fire({...n(),icon:"error",title:"Error",text:t.message})},E=(r,t)=>{o.fire({...n(),title:"Unenroll?",text:`Leave "${t}"? Your progress will be lost.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#333",confirmButtonText:"Unenroll"}).then(async l=>{if(l.isConfirmed){const m=await x.unenrollCourse(r);m.success?(o.fire({...n(),icon:"success",title:"Unenrolled",timer:1500,showConfirmButton:!1}),h()):o.fire({...n(),icon:"error",title:"Error",text:m.message})}})},B=["All",...new Set(i.map(r=>r.category||"General").filter(Boolean))],y=i.filter(r=>{const t=d.toLowerCase(),l=!d||(r.title||"").toLowerCase().includes(t)||(r.courseCode||"").toLowerCase().includes(t)||(r.category||"").toLowerCase().includes(t),m=c==="All"||(r.category||"General")===c;return l&&m}),b=r=>f[r]||f.General;return e.jsx(L,{pageTitle:"My Courses",role:"student",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:"My Courses"}),e.jsxs("p",{className:"text-sm text-gray-500 dark-theme:text-gray-400 mt-1",children:[s.length," enrolled, ",i.length," available"]})]}),e.jsxs("div",{className:"flex bg-cream dark-theme:bg-gray-800 rounded-xl p-1 border border-sand dark-theme:border-gray-700",children:[e.jsxs("button",{onClick:()=>p("enrolled"),className:`px-4 py-2 rounded-lg text-xs font-medium transition-colors ${g==="enrolled"?"bg-primary text-white":"text-gray-500 dark-theme:text-gray-500 hover:text-gray-800 dark-theme:hover:text-gray-100"}`,children:["Enrolled (",s.length,")"]}),e.jsx("button",{onClick:()=>p("browse"),className:`px-4 py-2 rounded-lg text-xs font-medium transition-colors ${g==="browse"?"bg-primary text-white":"text-gray-500 dark-theme:text-gray-500 hover:text-gray-800 dark-theme:hover:text-gray-100"}`,children:"Browse"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Enrolled",value:s.length,icon:"ri-book-open-line",color:"text-primary"},{label:"In Progress",value:s.filter(r=>(r.completionPercentage||0)>0&&(r.completionPercentage||0)<100).length,icon:"ri-loader-4-line",color:"text-blue-400"},{label:"Completed",value:s.filter(r=>(r.completionPercentage||0)===100).length,icon:"ri-check-double-line",color:"text-green-400"},{label:"Available",value:i.length,icon:"ri-compass-3-line",color:"text-violet-400"}].map((r,t)=>e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-4 border border-sand dark-theme:border-gray-800 flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-cream dark-theme:bg-gray-800 flex items-center justify-center ${r.color}`,children:e.jsx("i",{className:`${r.icon} text-lg`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100",children:r.value}),e.jsx("p",{className:"text-[10px] text-gray-500 dark-theme:text-gray-400",children:r.label})]})]},t))}),w?null:g==="enrolled"?s.length===0?e.jsxs("div",{className:"text-center py-20 text-gray-400 dark-theme:text-gray-500",children:[e.jsx("i",{className:"ri-book-open-line text-4xl mb-3 block"}),e.jsx("p",{children:"No enrolled courses. Browse and enroll!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(r=>{const t=r.completionPercentage||r.progress||0,l=r.category||"General";return e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl border border-sand dark-theme:border-gray-800 overflow-hidden hover:border-primary/30 hover:shadow-lg hover:shadow-primary/5 transition-all group",children:[e.jsx("div",{className:`h-1.5 bg-gradient-to-r ${b(l)}`}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium bg-primary/10 text-primary",children:l}),r.courseCode&&e.jsxs("span",{className:"text-[10px] text-gray-400 dark-theme:text-gray-500",children:[e.jsx("i",{className:"ri-hashtag mr-0.5"}),r.courseCode]})]}),e.jsx("h3",{className:"font-bold text-gray-800 dark-theme:text-gray-100 text-sm mb-1 group-hover:text-primary transition-colors",children:r.title}),e.jsx("p",{className:"text-[11px] text-gray-500 dark-theme:text-gray-400 line-clamp-2 mb-2",children:r.description}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 dark-theme:text-gray-500 mb-3",children:[r.mentorName&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-user-line mr-0.5"}),r.mentorName]}),e.jsxs("span",{children:[e.jsx("i",{className:"ri-stack-line mr-0.5"}),r.contentCount||0," content"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[e.jsx("span",{className:"text-gray-500 dark-theme:text-gray-400",children:"Progress"}),e.jsxs("span",{className:t===100?"text-green-400 font-medium":"text-primary",children:[t,"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-cream dark-theme:bg-gray-800 rounded-full",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all ${t===100?"bg-green-500":"bg-primary"}`,style:{width:`${t}%`}})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>j(`/student/course-viewer/${r.courseId||r.id}`),className:"flex-1 py-2.5 rounded-xl bg-primary text-white text-xs font-semibold hover:bg-primary-dark transition-colors",children:[e.jsx("i",{className:"ri-play-circle-line mr-1"}),"Continue"]}),e.jsx("button",{onClick:()=>E(r.courseId||r.id,r.title),className:"py-2.5 px-3 rounded-xl bg-red-500/10 text-red-400 text-xs hover:bg-red-500/20 transition-colors",title:"Unenroll",children:e.jsx("i",{className:"ri-logout-box-r-line"})})]})]})]},r.id||r.courseId)})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark-theme:text-gray-500 text-sm"}),e.jsx("input",{type:"text",placeholder:"Search courses...",value:d,onChange:r=>k(r.target.value),className:"w-full pl-9 pr-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 text-sm text-gray-800 dark-theme:text-gray-100 placeholder-gray-400 dark-theme:placeholder-gray-500 outline-none focus:border-primary"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:B.map(r=>e.jsx("button",{onClick:()=>C(r),className:`px-3 py-1.5 rounded-xl text-xs font-medium transition-colors ${c===r?"bg-primary text-white":"bg-cream dark-theme:bg-gray-800 text-gray-500 dark-theme:text-gray-500 border border-sand dark-theme:border-gray-700 hover:border-gray-400 dark-theme:hover:border-gray-600"}`,children:r},r))})]}),y.length===0?e.jsxs("div",{className:"text-center py-20 text-gray-400 dark-theme:text-gray-500",children:[e.jsx("i",{className:"ri-search-line text-4xl mb-3 block"}),e.jsx("p",{children:d||c!=="All"?"No matching courses":"No courses available"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(r=>{const t=r.category||"General";return e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl border border-sand dark-theme:border-gray-800 overflow-hidden hover:border-primary/30 hover:shadow-lg hover:shadow-primary/5 transition-all group",children:[e.jsx("div",{className:`h-1.5 bg-gradient-to-r ${b(t)}`}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium bg-green-500/10 text-green-400",children:t}),r.difficulty&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${r.difficulty==="Beginner"?"bg-green-500/10 text-green-400":r.difficulty==="Intermediate"?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"}`,children:r.difficulty}),r.courseCode&&e.jsxs("span",{className:"text-[10px] text-gray-400 dark-theme:text-gray-500",children:[e.jsx("i",{className:"ri-hashtag mr-0.5"}),r.courseCode]})]}),e.jsx("h3",{className:"font-bold text-gray-800 dark-theme:text-gray-100 text-sm mb-1 group-hover:text-primary transition-colors",children:r.title}),e.jsx("p",{className:"text-[11px] text-gray-500 dark-theme:text-gray-400 line-clamp-2 mb-2",children:r.description}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 dark-theme:text-gray-500 mb-4 flex-wrap",children:[e.jsxs("span",{children:[e.jsx("i",{className:"ri-user-line mr-0.5"}),r.mentorName||"Instructor"]}),r.courseType&&e.jsxs("span",{children:["â€¢ ",r.courseType]}),e.jsxs("span",{children:["â€¢ ",e.jsx("i",{className:"ri-stack-line mr-0.5"}),r.contentCount||0," items"]}),e.jsxs("span",{children:["â€¢ ",e.jsx("i",{className:"ri-book-2-line mr-0.5"}),r.subjectCount||0," units"]})]}),r.isEnrolled?e.jsxs("button",{disabled:!0,className:"w-full py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 text-gray-400 dark-theme:text-gray-500 text-xs font-medium cursor-not-allowed border border-sand dark-theme:border-gray-700",children:[e.jsx("i",{className:"ri-check-line mr-1"}),"Already Enrolled"]}):e.jsxs("button",{onClick:()=>S(r.id),className:"w-full py-2.5 rounded-xl bg-green-500 text-white text-xs font-semibold hover:bg-green-600 transition-colors",children:[e.jsx("i",{className:"ri-add-line mr-1"}),"Enroll Now"]})]})]},r.id)})})]})]})})};export{G as default};
