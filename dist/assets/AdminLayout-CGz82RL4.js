import{r as s,e as L,u as E,b as D,j as e,L as i,d as f,S as M,g as T}from"./index-mbJjgMST.js";const q=({children:y,pageTitle:z})=>{const[n,l]=s.useState(!1),[h,o]=s.useState(!1),[g,d]=s.useState(!1),[c,p]=s.useState([]),v=L(),j=E(),{user:u,logout:N}=D(),k=localStorage.getItem("theme"),[r,w]=s.useState(k||"light"),m=s.useRef(null),x=s.useRef(null);s.useEffect(()=>{r==="dark-theme"?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")},[r]),s.useEffect(()=>{const t=a=>{m.current&&!m.current.contains(a.target)&&o(!1),x.current&&!x.current.contains(a.target)&&d(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const S=()=>{const t=r==="light"?"dark-theme":"light";w(t),document.body.classList.toggle("dark-theme"),localStorage.setItem("theme",t)},C=()=>{d(!g),o(!1)};s.useEffect(()=>{(async()=>{const a=await f.getNotifications();a.success&&p(a.notifications||[])})()},[]);const A=async()=>{await f.markAllRead(),p(t=>t.map(a=>({...a,isRead:1})))},b=()=>{M.fire({...T(),title:"Sign Out?",text:"Are you sure you want to sign out?",icon:"question",showCancelButton:!0,confirmButtonColor:"#d4a574",confirmButtonText:"Yes, sign out"}).then(t=>{t.isConfirmed&&(N(),j("/auth"))})},R=c.filter(t=>!t.isRead).length,O=[{path:"/admin",icon:"ri-dashboard-line",label:"Dashboard"},{path:"/admin/manage-students",icon:"ri-user-line",label:"Students"},{path:"/admin/manage-mentors",icon:"ri-team-line",label:"Mentors"},{path:"/admin/courses-overview",icon:"ri-book-open-line",label:"Courses"},{type:"separator",label:"Content Management"},{path:"/admin/problem-solving",icon:"ri-code-s-slash-line",label:"Problem Solving"},{path:"/admin/aptitude",icon:"ri-question-answer-line",label:"Aptitude Tests"},{path:"/admin/events",icon:"ri-calendar-event-line",label:"Events"},{path:"/admin/discussion",icon:"ri-discuss-line",label:"Discussion"},{type:"separator",label:"Mentor & Students"},{path:"/admin/assignments",icon:"ri-task-line",label:"Assignments"},{path:"/admin/doubts",icon:"ri-chat-3-line",label:"Student Doubts"},{path:"/admin/students-progress",icon:"ri-line-chart-line",label:"Student Progress"},{type:"separator",label:"Reports & Settings"},{path:"/admin/performance-analytics",icon:"ri-line-chart-line",label:"Analytics"},{path:"/admin/system-reports",icon:"ri-file-chart-line",label:"Reports"},{path:"/admin/manage-requests",icon:"ri-git-pull-request-line",label:"Requests"},{path:"/admin/settings",icon:"ri-settings-line",label:"Settings"}];return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-cream dark-theme:bg-gray-950",children:[n&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 lg:hidden",onClick:()=>l(!1)}),e.jsx("button",{className:"fixed top-3 left-3 z-50 lg:hidden w-9 h-9 rounded-lg bg-white dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 shadow-sm flex items-center justify-center text-gray-600 dark-theme:text-gray-400",onClick:()=>l(!n),children:e.jsx("i",{className:"ri-menu-line text-lg"})}),e.jsxs("div",{className:`fixed lg:static inset-y-0 left-0 z-50 w-[260px] bg-gray-950 dark-theme:bg-gray-900 flex flex-col transition-transform duration-300
        ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 px-5 py-5",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx("i",{className:"ri-seedling-fill text-primary-light text-lg"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-[15px] text-white leading-tight",children:"Sowberry"}),e.jsx("span",{className:"text-[10px] font-medium tracking-wider text-gray-500 uppercase",children:"ADMIN"})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-2 px-3 space-y-0.5",children:O.map((t,a)=>t.type==="separator"?e.jsx("div",{className:"pt-4 pb-1.5 px-3",children:e.jsx("p",{className:"text-[10px] font-semibold tracking-wider text-gray-600 uppercase",children:t.label})},`sep-${a}`):e.jsxs(i,{to:t.path,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg text-[13px] font-medium transition-all duration-150
                  ${v.pathname===t.path?"bg-white/10 text-white":"text-gray-400 hover:bg-white/5 hover:text-gray-200"}`,onClick:()=>l(!1),children:[e.jsx("i",{className:`${t.icon} text-base`}),e.jsx("span",{children:t.label})]},t.path))}),e.jsx("div",{className:"px-3 py-4 border-t border-white/10",children:e.jsxs("button",{onClick:b,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-[13px] font-medium text-gray-400 hover:bg-white/5 hover:text-gray-200 transition-all duration-150",children:[e.jsx("i",{className:"ri-logout-box-line text-base"}),e.jsx("span",{children:"Sign Out"})]})})]}),e.jsxs("main",{className:"flex-1 flex flex-col min-h-screen overflow-hidden",children:[e.jsxs("header",{className:"h-14 bg-white dark-theme:bg-gray-900 border-b border-sand dark-theme:border-gray-800 flex items-center justify-between px-4 lg:px-6 shrink-0",children:[e.jsx("div",{className:"flex items-center gap-3 flex-1 max-w-sm",children:e.jsxs("div",{className:"relative w-full hidden sm:block",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-9 pr-4 py-2 rounded-lg bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-[13px] text-gray-700 dark-theme:text-gray-200 transition-colors"})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:S,className:"w-9 h-9 rounded-lg flex items-center justify-center text-gray-500 dark-theme:text-gray-400 hover:bg-cream-dark dark-theme:hover:bg-gray-800 hover:text-gray-700 dark-theme:hover:text-gray-200 transition-colors",children:e.jsx("i",{className:r==="dark-theme"?"ri-moon-line text-base":"ri-sun-line text-base"})}),e.jsxs("div",{ref:x,className:"relative",children:[e.jsxs("button",{onClick:C,className:"relative w-9 h-9 rounded-lg flex items-center justify-center text-gray-500 dark-theme:text-gray-400 hover:bg-cream-dark dark-theme:hover:bg-gray-800 hover:text-gray-700 dark-theme:hover:text-gray-200 transition-colors",children:[e.jsx("i",{className:"ri-notification-3-line text-base"}),R>0&&e.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-primary rounded-full"})]}),g&&e.jsxs("div",{className:"absolute right-0 top-11 w-80 bg-white dark-theme:bg-gray-900 rounded-xl shadow-lg border border-sand dark-theme:border-gray-800 overflow-hidden z-50",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-sand dark-theme:border-gray-800",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark-theme:text-gray-200 text-[13px]",children:"Notifications"}),e.jsx("button",{onClick:A,className:"text-xs text-primary hover:underline",children:"Mark all read"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:c.length===0?e.jsx("p",{className:"px-4 py-6 text-center text-sm text-gray-400",children:"No notifications"}):c.slice(0,5).map((t,a)=>e.jsxs("div",{className:`flex items-start gap-3 px-4 py-3 hover:bg-cream dark-theme:hover:bg-gray-800 transition-colors cursor-pointer ${t.isRead?"":"bg-primary/5"}`,children:[e.jsx("div",{className:"w-7 h-7 rounded-md bg-primary/10 flex items-center justify-center shrink-0 mt-0.5",children:e.jsx("i",{className:"ri-notification-3-line text-primary text-xs"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[13px] text-gray-700 dark-theme:text-gray-200",children:t.title||t.message}),e.jsx("span",{className:"text-[11px] text-gray-400",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():""})]})]},t.id||a))}),e.jsx("div",{className:"border-t border-sand dark-theme:border-gray-800 p-2",children:e.jsx("button",{className:"w-full text-center text-[13px] text-primary hover:bg-primary/5 rounded-lg py-2 transition-colors",children:"View all"})})]})]}),e.jsxs("div",{ref:m,className:"relative ml-1",children:[e.jsxs("button",{onClick:()=>{o(!h),d(!1)},className:"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-cream-dark dark-theme:hover:bg-gray-800 transition-colors",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(u?.fullName||"Admin")}&size=28&background=c96442&color=fff&bold=true`,alt:"User",className:"w-7 h-7 rounded-md"}),e.jsx("div",{className:"hidden sm:flex flex-col items-start",children:e.jsx("span",{className:"text-[13px] font-medium text-gray-700 dark-theme:text-gray-200",children:u?.fullName||"Admin"})})]}),h&&e.jsxs("div",{className:"absolute right-0 top-11 w-44 bg-white dark-theme:bg-gray-900 rounded-xl shadow-lg border border-sand dark-theme:border-gray-800 overflow-hidden z-50 py-1",children:[e.jsxs(i,{to:"/admin",className:"flex items-center gap-2 px-3 py-2 text-[13px] text-gray-700 dark-theme:text-gray-200 hover:bg-cream dark-theme:hover:bg-gray-800 transition-colors",children:[e.jsx("i",{className:"ri-dashboard-line text-sm"})," Dashboard"]}),e.jsxs(i,{to:"/admin/profile",className:"flex items-center gap-2 px-3 py-2 text-[13px] text-gray-700 dark-theme:text-gray-200 hover:bg-cream dark-theme:hover:bg-gray-800 transition-colors",children:[e.jsx("i",{className:"ri-user-line text-sm"})," My Profile"]}),e.jsxs(i,{to:"/admin/settings",className:"flex items-center gap-2 px-3 py-2 text-[13px] text-gray-700 dark-theme:text-gray-200 hover:bg-cream dark-theme:hover:bg-gray-800 transition-colors",children:[e.jsx("i",{className:"ri-settings-line text-sm"})," Settings"]}),e.jsx("div",{className:"border-t border-sand dark-theme:border-gray-800 my-1"}),e.jsxs("button",{onClick:b,className:"w-full flex items-center gap-2 px-3 py-2 text-[13px] text-danger hover:bg-danger/5 transition-colors",children:[e.jsx("i",{className:"ri-logout-box-line text-sm"})," Sign Out"]})]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5 lg:p-8",children:y})]})]})};export{q as A};
