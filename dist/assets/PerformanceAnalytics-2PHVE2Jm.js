import{r as l,j as e,d as u}from"./index-CHjF_dAl.js";import{A as d}from"./AdminLayout-CsrdiLzj.js";import{e as c,a as m}from"./exportData-CnZtBtFr.js";const j=()=>{const[s,x]=l.useState(null),[g,h]=l.useState(!0);if(l.useEffect(()=>{(async()=>{const r=await u.getAnalytics();if(r.success){const{success:a,message:i,...p}=r;x(p)}h(!1)})()},[]),g)return e.jsx(d,{pageTitle:"Performance Analytics",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-primary"})})});const n=()=>{const t=["Rank","Course","Enrollments"],r=(s?.courseCompletion||[]).map((a,i)=>[i+1,a.title,a.enrollmentCount]);return{title:"Top Courses by Enrollment",columns:t,rows:r,fileName:"Sowberry_Top_Courses"}},o=()=>{const t=["Month","Enrollments","New Students"],r=(s?.registrationTrends||[]).map(a=>[a.month,a.enrollments,a.newStudents]);return{title:"Monthly Trends Report",columns:t,rows:r,fileName:"Sowberry_Monthly_Trends"}};return e.jsx(d,{pageTitle:"Performance Analytics",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:"Performance Analytics"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Students",value:s?.totalStudents||0,icon:"ri-user-line",color:"primary",change:"+12%"},{label:"Total Mentors",value:s?.totalMentors||0,icon:"ri-team-line",color:"blue-500",change:"+5%"},{label:"Active Courses",value:s?.totalCourses||0,icon:"ri-book-open-line",color:"green-500",change:"+8%"},{label:"Completion Rate",value:`${s?.completionRate||0}%`,icon:"ri-medal-line",color:"amber-500",change:"+3%"}].map((t,r)=>e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-5 border border-sand dark-theme:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-${t.color}/10 flex items-center justify-center`,children:e.jsx("i",{className:`${t.icon} text-${t.color} text-lg`})}),e.jsx("span",{className:"text-xs text-green-500 font-medium bg-green-50 dark-theme:bg-green-900/20 px-2 py-0.5 rounded-full",children:t.change})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:t.label}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:t.value})]},r))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 border border-sand dark-theme:border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100 mb-4 flex items-center justify-between",children:["Top Courses by Enrollment",e.jsxs("span",{className:"flex items-center gap-1 bg-cream/50 dark-theme:bg-gray-800/50 border border-sand dark-theme:border-gray-700 rounded-xl px-1",children:[e.jsxs("button",{onClick:()=>c(n()),className:"px-2.5 py-1 rounded-lg text-[11px] font-medium text-red-500 hover:bg-red-50 dark-theme:hover:bg-red-900/20 transition-colors flex items-center gap-1",title:"Download PDF",children:[e.jsx("i",{className:"ri-file-pdf-2-line text-xs"})," PDF"]}),e.jsx("span",{className:"w-px h-3.5 bg-sand dark-theme:bg-gray-700"}),e.jsxs("button",{onClick:()=>m(n()),className:"px-2.5 py-1 rounded-lg text-[11px] font-medium text-green-600 hover:bg-green-50 dark-theme:hover:bg-green-900/20 transition-colors flex items-center gap-1",title:"Download Excel",children:[e.jsx("i",{className:"ri-file-excel-2-line text-xs"})," Excel"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[(s?.courseCompletion||[]).slice(0,5).map((t,r)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"w-6 h-6 rounded-md bg-primary/10 text-primary text-xs font-bold flex items-center justify-center",children:r+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark-theme:text-gray-200 truncate",children:t.title}),e.jsx("div",{className:"mt-1 h-1.5 bg-gray-100 dark-theme:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${Math.min(100,t.enrollmentCount/(s?.totalStudents||1)*100)}%`}})})]}),e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark-theme:text-gray-400",children:t.enrollmentCount})]},r)),(!s?.courseCompletion||s.courseCompletion.length===0)&&e.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No course data available"})]})]}),e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 border border-sand dark-theme:border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100 mb-4 flex items-center justify-between",children:["Monthly Trends",e.jsxs("span",{className:"flex items-center gap-1 bg-cream/50 dark-theme:bg-gray-800/50 border border-sand dark-theme:border-gray-700 rounded-xl px-1",children:[e.jsxs("button",{onClick:()=>c(o()),className:"px-2.5 py-1 rounded-lg text-[11px] font-medium text-red-500 hover:bg-red-50 dark-theme:hover:bg-red-900/20 transition-colors flex items-center gap-1",title:"Download PDF",children:[e.jsx("i",{className:"ri-file-pdf-2-line text-xs"})," PDF"]}),e.jsx("span",{className:"w-px h-3.5 bg-sand dark-theme:bg-gray-700"}),e.jsxs("button",{onClick:()=>m(o()),className:"px-2.5 py-1 rounded-lg text-[11px] font-medium text-green-600 hover:bg-green-50 dark-theme:hover:bg-green-900/20 transition-colors flex items-center gap-1",title:"Download Excel",children:[e.jsx("i",{className:"ri-file-excel-2-line text-xs"})," Excel"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[(s?.registrationTrends||[]).map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-cream/50 dark-theme:bg-gray-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx("i",{className:"ri-calendar-line text-primary text-sm"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark-theme:text-gray-200",children:t.month})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-800 dark-theme:text-gray-100",children:[t.enrollments," enrollments"]}),e.jsxs("p",{className:"text-[11px] text-gray-400",children:[t.newStudents," new students"]})]})]},r)),(!s?.registrationTrends||s.registrationTrends.length===0)&&e.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No trend data available"})]})]})]})]})})};export{j as default};
