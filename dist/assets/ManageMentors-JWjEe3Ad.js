import{r as n,j as e,d as x,S as c,g as m}from"./index-CHjF_dAl.js";import{A as D}from"./AdminLayout-CsrdiLzj.js";import{e as E,a as A}from"./exportData-CnZtBtFr.js";const U=()=>{const[u,f]=n.useState([]),[y,g]=n.useState(!0),[h,N]=n.useState(""),[j,o]=n.useState(!1),[i,p]=n.useState(null),[r,l]=n.useState({email:"",username:"",fullName:"",phone:"",password:""}),d=async()=>{g(!0);const t=await x.getMentors(h?`search=${h}`:"");t.success&&f(t.mentors||[]),g(!1)};n.useEffect(()=>{d()},[]);const v=t=>{t.preventDefault(),d()},k=()=>{p(null),l({email:"",username:"",fullName:"",phone:"",password:""}),o(!0)},w=t=>{p(t),l({email:t.email,username:t.username,fullName:t.fullName,phone:t.phone||"",password:""}),o(!0)},C=async t=>{if(t.preventDefault(),i){const s={...r};s.password||delete s.password;const a=await x.updateMentor(i.id,s);a.success?(c.fire({...m(),icon:"success",title:"Updated!",timer:1500,showConfirmButton:!1}),o(!1),d()):c.fire({...m(),icon:"error",title:"Error",text:a.message})}else{const s=await x.createMentor({...r,role:"mentor"});s.success?(c.fire({...m(),icon:"success",title:"Mentor Created!",timer:1500,showConfirmButton:!1}),o(!1),d()):c.fire({...m(),icon:"error",title:"Error",text:s.message})}},M=(t,s)=>{c.fire({...m(),title:"Delete Mentor?",text:`Remove ${s}? This cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",confirmButtonText:"Delete"}).then(async a=>{a.isConfirmed&&(await x.deleteMentor(t)).success&&(c.fire({...m(),icon:"success",title:"Deleted!",timer:1500,showConfirmButton:!1}),d())})},S=async t=>{(await x.updateMentor(t.id,{isActive:!t.isActive})).success&&d()},b=()=>{const t=["Name","Username","Email","Phone","Status","Joined"],s=u.map(a=>[a.fullName,a.username,a.email,a.phone||"â€”",a.isActive?"Active":"Inactive",new Date(a.createdAt).toLocaleDateString()]);return{title:"Mentors Report",columns:t,rows:s,fileName:"Sowberry_Mentors"}};return e.jsxs(D,{pageTitle:"Manage Mentors",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:"Manage Mentors"}),e.jsxs("p",{className:"text-sm text-gray-500 dark-theme:text-gray-400 mt-1",children:[u.length," total mentors"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("form",{onSubmit:v,className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search mentors...",value:h,onChange:t=>N(t.target.value),className:"pl-9 pr-4 py-2.5 rounded-xl bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm w-64"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 rounded-xl px-1",children:[e.jsxs("button",{onClick:()=>E(b()),className:"px-3 py-2 rounded-lg text-xs font-medium text-red-500 hover:bg-red-50 dark-theme:hover:bg-red-900/20 transition-colors flex items-center gap-1.5",title:"Download PDF",children:[e.jsx("i",{className:"ri-file-pdf-2-line text-sm"})," PDF"]}),e.jsx("div",{className:"w-px h-5 bg-sand dark-theme:bg-gray-700"}),e.jsxs("button",{onClick:()=>A(b()),className:"px-3 py-2 rounded-lg text-xs font-medium text-green-600 hover:bg-green-50 dark-theme:hover:bg-green-900/20 transition-colors flex items-center gap-1.5",title:"Download Excel",children:[e.jsx("i",{className:"ri-file-excel-2-line text-sm"})," Excel"]})]}),e.jsxs("button",{onClick:k,className:"px-4 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx("i",{className:"ri-add-line"})," Add Mentor"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:y?e.jsx("div",{className:"col-span-full flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-primary"})}):u.length===0?e.jsxs("div",{className:"col-span-full text-center py-20 text-gray-400",children:[e.jsx("i",{className:"ri-team-line text-4xl mb-3 block"}),e.jsx("p",{children:"No mentors found"})]}):u.map(t=>e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl border border-sand dark-theme:border-gray-800 p-5 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.fullName)}&size=44&background=c96442&color=fff`,className:"w-11 h-11 rounded-xl",alt:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark-theme:text-gray-100 text-sm",children:t.fullName}),e.jsxs("p",{className:"text-xs text-gray-400",children:["@",t.username]})]})]}),e.jsx("button",{onClick:()=>S(t),className:`px-2.5 py-1 rounded-full text-xs font-medium ${t.isActive?"bg-green-100 text-green-700 dark-theme:bg-green-900/30 dark-theme:text-green-400":"bg-red-100 text-red-700 dark-theme:bg-red-900/30 dark-theme:text-red-400"}`,children:t.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark-theme:text-gray-400 flex items-center gap-2",children:[e.jsx("i",{className:"ri-mail-line"}),t.email]}),e.jsxs("p",{className:"text-xs text-gray-500 dark-theme:text-gray-400 flex items-center gap-2",children:[e.jsx("i",{className:"ri-phone-line"}),t.phone||"No phone"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark-theme:text-gray-400 flex items-center gap-2",children:[e.jsx("i",{className:"ri-calendar-line"}),"Joined ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>w(t),className:"flex-1 py-2 rounded-xl bg-blue-50 dark-theme:bg-blue-900/20 text-blue-600 dark-theme:text-blue-400 text-xs font-medium hover:bg-blue-100 transition-colors",children:[e.jsx("i",{className:"ri-edit-line mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>M(t.id,t.fullName),className:"flex-1 py-2 rounded-xl bg-red-50 dark-theme:bg-red-900/20 text-red-600 dark-theme:text-red-400 text-xs font-medium hover:bg-red-100 transition-colors",children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Delete"]})]})]},t.id))})]}),j&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 w-full max-w-md mx-4 border border-sand dark-theme:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100",children:i?"Edit Mentor":"Add Mentor"}),e.jsx("button",{onClick:()=>o(!1),className:"w-8 h-8 rounded-lg hover:bg-gray-100 dark-theme:hover:bg-gray-800 flex items-center justify-center",children:e.jsx("i",{className:"ri-close-line text-lg text-gray-500"})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-3",children:[e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:r.email,onChange:t=>l({...r,email:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("input",{type:"text",placeholder:"Username",required:!0,value:r.username,onChange:t=>l({...r,username:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("input",{type:"text",placeholder:"Full Name",required:!0,value:r.fullName,onChange:t=>l({...r,fullName:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("input",{type:"tel",placeholder:"Phone",value:r.phone,onChange:t=>l({...r,phone:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("input",{type:"password",placeholder:i?"New Password (leave blank to keep)":"Password",required:!i,value:r.password,onChange:t=>l({...r,password:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 py-2.5 rounded-xl border border-sand dark-theme:border-gray-700 text-sm font-medium text-gray-600 dark-theme:text-gray-400 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark",children:i?"Update":"Create"})]})]})]})})]})};export{U as default};
