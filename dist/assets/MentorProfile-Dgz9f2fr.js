import{b as I,r as m,j as e,c as g,S as n,g as o}from"./index-mbJjgMST.js";import{D as j}from"./DashboardLayout-B1KlLbJt.js";const O=()=>{const{user:v,updateUser:f}=I(),[x,y]=m.useState("personal"),[c,u]=m.useState(!1),[N,w]=m.useState(!0),[r,i]=m.useState({fullName:"",email:"",username:"",phone:"",countryCode:"+91",college:"",department:"",gender:"",dateOfBirth:"",address:"",bio:"",github:"",linkedin:"",hackerrank:"",leetcode:"",profileImage:""}),[d,p]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""});m.useEffect(()=>{(async()=>{const s=await g.getMe();s.success&&s.user&&i({fullName:s.user.fullName||"",email:s.user.email||"",username:s.user.username||"",phone:s.user.phone||"",countryCode:s.user.countryCode||"+91",college:s.user.college||"",department:s.user.department||"",gender:s.user.gender||"",dateOfBirth:s.user.dateOfBirth?s.user.dateOfBirth.split("T")[0]:"",address:s.user.address||"",bio:s.user.bio||"",github:s.user.github||"",linkedin:s.user.linkedin||"",hackerrank:s.user.hackerrank||"",leetcode:s.user.leetcode||"",profileImage:s.user.profileImage||""}),w(!1)})()},[]);const b=async a=>{a.preventDefault(),u(!0);const s=await g.updateProfile(r);s.success?(f(s.user),n.fire({...o(),icon:"success",title:"Profile Updated!",timer:1500,showConfirmButton:!1})):n.fire({...o(),icon:"error",title:"Error",text:s.message}),u(!1)},k=async a=>{if(a.preventDefault(),d.newPassword!==d.confirmPassword){n.fire({...o(),icon:"warning",title:"Mismatch",text:"Passwords do not match"});return}if(d.newPassword.length<6){n.fire({...o(),icon:"warning",title:"Too Short",text:"Password must be at least 6 characters"});return}u(!0);const s=await g.changePassword({currentPassword:d.currentPassword,newPassword:d.newPassword});s.success?(n.fire({...o(),icon:"success",title:"Password Changed!",timer:1500,showConfirmButton:!1}),p({currentPassword:"",newPassword:"",confirmPassword:""})):n.fire({...o(),icon:"error",title:"Error",text:s.message}),u(!1)},P=async a=>{const s=a.target.files[0];if(!s)return;if(s.size>2*1024*1024){n.fire({...o(),icon:"warning",title:"Too Large",text:"Image must be under 2MB"});return}u(!0);const h=await g.uploadProfileImage(s);h.success&&h.profileImage?(i(S=>({...S,profileImage:h.profileImage})),f({...v,profileImage:h.profileImage}),n.fire({...o(),icon:"success",title:"Photo Updated!",timer:1500,showConfirmButton:!1})):n.fire({...o(),icon:"error",title:"Error",text:h.message||"Upload failed"}),u(!1)},C=[{id:"personal",label:"Personal Info",icon:"ri-user-line"},{id:"social",label:"Social Links",icon:"ri-links-line"},{id:"security",label:"Security",icon:"ri-lock-line"}],t="w-full px-3 py-2.5 rounded-lg bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-[13px] text-gray-700 dark-theme:text-gray-200 transition-colors",l="block text-[12px] font-semibold text-gray-500 dark-theme:text-gray-400 uppercase tracking-wide mb-1.5";return N?e.jsx(j,{pageTitle:"My Profile",role:"mentor",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"})})}):e.jsx(j,{pageTitle:"My Profile",role:"mentor",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white dark-theme:bg-gray-900 rounded-xl border border-sand dark-theme:border-gray-800 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-5",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r.profileImage?`http://localhost:5000${r.profileImage}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.fullName||"Mentor")}&size=96&background=c96442&color=fff&bold=true`,alt:"Profile",className:"w-24 h-24 rounded-xl object-cover border-2 border-sand dark-theme:border-gray-700"}),e.jsxs("label",{className:"absolute inset-0 bg-black/40 rounded-xl flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:[e.jsx("i",{className:"ri-camera-line text-white text-xl"}),e.jsx("input",{type:"file",accept:"image/*",onChange:P,className:"hidden"})]})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark-theme:text-white",children:r.fullName||"Mentor"}),e.jsx("p",{className:"text-sm text-gray-500 dark-theme:text-gray-400",children:r.email}),e.jsx("span",{className:"inline-block mt-1.5 px-2.5 py-0.5 bg-blue-500/10 text-blue-600 dark-theme:text-blue-400 text-[11px] font-semibold rounded-full uppercase",children:"Mentor"})]})]})}),e.jsx("div",{className:"flex gap-1 bg-white dark-theme:bg-gray-900 rounded-xl border border-sand dark-theme:border-gray-800 p-1.5",children:C.map(a=>e.jsxs("button",{onClick:()=>y(a.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-[13px] font-medium transition-all ${x===a.id?"bg-primary text-white shadow-sm":"text-gray-500 dark-theme:text-gray-400 hover:bg-cream dark-theme:hover:bg-gray-800"}`,children:[e.jsx("i",{className:a.icon}),e.jsx("span",{className:"hidden sm:inline",children:a.label})]},a.id))}),e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-xl border border-sand dark-theme:border-gray-800 p-6",children:[x==="personal"&&e.jsxs("form",{onSubmit:b,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Full Name"}),e.jsx("input",{type:"text",className:t,value:r.fullName,onChange:a=>i(s=>({...s,fullName:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Email"}),e.jsx("input",{type:"email",className:`${t} opacity-60 cursor-not-allowed`,value:r.email,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Username"}),e.jsx("input",{type:"text",className:`${t} opacity-60 cursor-not-allowed`,value:r.username,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Phone"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:`${t} w-20`,value:r.countryCode,onChange:a=>i(s=>({...s,countryCode:a.target.value}))}),e.jsx("input",{type:"text",className:t,value:r.phone,onChange:a=>i(s=>({...s,phone:a.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Gender"}),e.jsxs("select",{className:t,value:r.gender,onChange:a=>i(s=>({...s,gender:a.target.value})),children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Date of Birth"}),e.jsx("input",{type:"date",className:t,value:r.dateOfBirth,onChange:a=>i(s=>({...s,dateOfBirth:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"College"}),e.jsx("input",{type:"text",className:t,value:r.college,onChange:a=>i(s=>({...s,college:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Department"}),e.jsx("input",{type:"text",className:t,value:r.department,onChange:a=>i(s=>({...s,department:a.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Address"}),e.jsx("textarea",{className:`${t} resize-none`,rows:"2",value:r.address,onChange:a=>i(s=>({...s,address:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Bio"}),e.jsx("textarea",{className:`${t} resize-none`,rows:"3",value:r.bio,onChange:a=>i(s=>({...s,bio:a.target.value})),placeholder:"Tell us about yourself..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2.5 bg-primary hover:bg-primary-dark text-white text-[13px] font-semibold rounded-lg transition-colors disabled:opacity-50",children:c?"Saving...":"Save Changes"})})]}),x==="social"&&e.jsxs("form",{onSubmit:b,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:l,children:[e.jsx("i",{className:"ri-github-fill mr-1"}),"GitHub"]}),e.jsx("input",{type:"url",className:t,value:r.github,onChange:a=>i(s=>({...s,github:a.target.value})),placeholder:"https://github.com/username"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:l,children:[e.jsx("i",{className:"ri-linkedin-box-fill mr-1"}),"LinkedIn"]}),e.jsx("input",{type:"url",className:t,value:r.linkedin,onChange:a=>i(s=>({...s,linkedin:a.target.value})),placeholder:"https://linkedin.com/in/username"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:l,children:[e.jsx("i",{className:"ri-code-box-line mr-1"}),"HackerRank"]}),e.jsx("input",{type:"url",className:t,value:r.hackerrank,onChange:a=>i(s=>({...s,hackerrank:a.target.value})),placeholder:"https://hackerrank.com/username"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:l,children:[e.jsx("i",{className:"ri-code-s-slash-line mr-1"}),"LeetCode"]}),e.jsx("input",{type:"url",className:t,value:r.leetcode,onChange:a=>i(s=>({...s,leetcode:a.target.value})),placeholder:"https://leetcode.com/username"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2.5 bg-primary hover:bg-primary-dark text-white text-[13px] font-semibold rounded-lg transition-colors disabled:opacity-50",children:c?"Saving...":"Save Changes"})})]}),x==="security"&&e.jsxs("form",{onSubmit:k,className:"space-y-5 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Current Password"}),e.jsx("input",{type:"password",className:t,value:d.currentPassword,onChange:a=>p(s=>({...s,currentPassword:a.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"New Password"}),e.jsx("input",{type:"password",className:t,value:d.newPassword,onChange:a=>p(s=>({...s,newPassword:a.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Confirm New Password"}),e.jsx("input",{type:"password",className:t,value:d.confirmPassword,onChange:a=>p(s=>({...s,confirmPassword:a.target.value})),required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2.5 bg-primary hover:bg-primary-dark text-white text-[13px] font-semibold rounded-lg transition-colors disabled:opacity-50",children:c?"Changing...":"Change Password"})})]})]})]})})};export{O as default};
