import{r as l,j as e,I as M,e as c,S as i}from"./index-DYHuGrbk.js";import{A as S}from"./AdminLayout-BXbc9gsA.js";const B=()=>{const[x,f]=l.useState([]),[p,h]=l.useState(!0),[u,b]=l.useState(""),[y,n]=l.useState(!1),[o,g]=l.useState(null),[r,a]=l.useState({email:"",username:"",fullName:"",phone:"",password:""}),d=async()=>{h(!0);const t=await c.getMentors(u?`search=${u}`:"");t.success&&f(t.mentors||[]),h(!1)};l.useEffect(()=>{d()},[]);const N=t=>{t.preventDefault(),d()},j=()=>{g(null),a({email:"",username:"",fullName:"",phone:"",password:""}),n(!0)},k=t=>{g(t),a({email:t.email,username:t.username,fullName:t.fullName,phone:t.phone||"",password:""}),n(!0)},v=async t=>{if(t.preventDefault(),o){const s={...r};s.password||delete s.password;const m=await c.updateMentor(o.id,s);m.success?(i.fire({icon:"success",title:"Updated!",timer:1500,showConfirmButton:!1,background:"#fff",color:"#1f2937"}),n(!1),d()):i.fire({icon:"error",title:"Error",text:m.message,background:"#fff",color:"#1f2937"})}else{const s=await c.createMentor({...r,role:"mentor"});s.success?(i.fire({icon:"success",title:"Mentor Created!",timer:1500,showConfirmButton:!1,background:"#fff",color:"#1f2937"}),n(!1),d()):i.fire({icon:"error",title:"Error",text:s.message,background:"#fff",color:"#1f2937"})}},w=(t,s)=>{i.fire({title:"Delete Mentor?",text:`Remove ${s}? This cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",confirmButtonText:"Delete",background:"#fff",color:"#1f2937"}).then(async m=>{m.isConfirmed&&(await c.deleteMentor(t)).success&&(i.fire({icon:"success",title:"Deleted!",timer:1500,showConfirmButton:!1,background:"#fff",color:"#1f2937"}),d())})},C=async t=>{(await c.updateMentor(t.id,{isActive:!t.isActive})).success&&d()};return e.jsxs(S,{pageTitle:"Manage Mentors",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:"Manage Mentors"}),e.jsxs("p",{className:"text-sm text-gray-500 dark-theme:text-gray-400 mt-1",children:[x.length," total mentors"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("form",{onSubmit:N,className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search mentors...",value:u,onChange:t=>b(t.target.value),className:"pl-9 pr-4 py-2.5 rounded-xl bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm w-64"})]}),e.jsxs("button",{onClick:j,className:"px-4 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx("i",{className:"ri-add-line"})," Add Mentor"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:p?e.jsx("div",{className:"col-span-full",children:e.jsx(M,{})}):x.length===0?e.jsxs("div",{className:"col-span-full text-center py-20 text-gray-400",children:[e.jsx("i",{className:"ri-team-line text-4xl mb-3 block"}),e.jsx("p",{children:"No mentors found"})]}):x.map(t=>e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl border border-sand dark-theme:border-gray-800 p-5 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.fullName)}&size=44&background=c96442&color=fff`,className:"w-11 h-11 rounded-xl",alt:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark-theme:text-gray-100 text-sm",children:t.fullName}),e.jsxs("p",{className:"text-xs text-gray-400",children:["@",t.username]})]})]}),e.jsx("button",{onClick:()=>C(t),className:`px-2.5 py-1 rounded-full text-xs font-medium ${t.isActive?"bg-green-100 text-green-700 dark-theme:bg-green-900/30 dark-theme:text-green-400":"bg-red-100 text-red-700 dark-theme:bg-red-900/30 dark-theme:text-red-400"}`,children:t.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark-theme:text-gray-400 flex items-center gap-2",children:[e.jsx("i",{className:"ri-mail-line"}),t.email]}),e.jsxs("p",{className:"text-xs text-gray-500 dark-theme:text-gray-400 flex items-center gap-2",children:[e.jsx("i",{className:"ri-phone-line"}),t.phone||"No phone"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark-theme:text-gray-400 flex items-center gap-2",children:[e.jsx("i",{className:"ri-calendar-line"}),"Joined ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>k(t),className:"flex-1 py-2 rounded-xl bg-blue-50 dark-theme:bg-blue-900/20 text-blue-600 dark-theme:text-blue-400 text-xs font-medium hover:bg-blue-100 transition-colors",children:[e.jsx("i",{className:"ri-edit-line mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>w(t.id,t.fullName),className:"flex-1 py-2 rounded-xl bg-red-50 dark-theme:bg-red-900/20 text-red-600 dark-theme:text-red-400 text-xs font-medium hover:bg-red-100 transition-colors",children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Delete"]})]})]},t.id))})]}),y&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 w-full max-w-md mx-4 border border-sand dark-theme:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100",children:o?"Edit Mentor":"Add Mentor"}),e.jsx("button",{onClick:()=>n(!1),className:"w-8 h-8 rounded-lg hover:bg-gray-100 dark-theme:hover:bg-gray-800 flex items-center justify-center",children:e.jsx("i",{className:"ri-close-line text-lg text-gray-500"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-3",children:[e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:r.email,onChange:t=>a({...r,email:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("input",{type:"text",placeholder:"Username",required:!0,value:r.username,onChange:t=>a({...r,username:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("input",{type:"text",placeholder:"Full Name",required:!0,value:r.fullName,onChange:t=>a({...r,fullName:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("input",{type:"tel",placeholder:"Phone",value:r.phone,onChange:t=>a({...r,phone:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("input",{type:"password",placeholder:o?"New Password (leave blank to keep)":"Password",required:!o,value:r.password,onChange:t=>a({...r,password:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 py-2.5 rounded-xl border border-sand dark-theme:border-gray-700 text-sm font-medium text-gray-600 dark-theme:text-gray-400 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark",children:o?"Update":"Create"})]})]})]})})]})};export{B as default};
