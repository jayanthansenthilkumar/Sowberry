import{c as N,r as m,j as e,e as b,d as f,S as o}from"./index-DYHuGrbk.js";import{A as v}from"./AdminLayout-BXbc9gsA.js";const C=()=>{const{user:d,updateUser:h}=N(),[u,p]=m.useState("profile"),[n,g]=m.useState({fullName:"",email:"",phone:"",username:""}),[t,x]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,c]=m.useState({}),[l,i]=m.useState(!1);m.useEffect(()=>{d&&g({fullName:d.fullName||"",email:d.email||"",phone:d.phone||"",username:d.username||""}),(async()=>{const a=await b.getSettings();a.success&&c(a.settings||{})})()},[d]);const y=async r=>{r.preventDefault(),i(!0);const a=await f.updateProfile(n);a.success?(h(a.user),o.fire({icon:"success",title:"Profile Updated!",timer:1500,showConfirmButton:!1,background:"#fff",color:"#1f2937"})):o.fire({icon:"error",title:"Error",text:a.message,background:"#fff",color:"#1f2937"}),i(!1)},w=async r=>{if(r.preventDefault(),t.newPassword!==t.confirmPassword){o.fire({icon:"warning",title:"Mismatch",text:"Passwords do not match",background:"#fff",color:"#1f2937"});return}i(!0);const a=await f.changePassword({currentPassword:t.currentPassword,newPassword:t.newPassword});a.success?(o.fire({icon:"success",title:"Password Changed!",timer:1500,showConfirmButton:!1,background:"#fff",color:"#1f2937"}),x({currentPassword:"",newPassword:"",confirmPassword:""})):o.fire({icon:"error",title:"Error",text:a.message,background:"#fff",color:"#1f2937"}),i(!1)},k=async r=>{r.preventDefault(),i(!0);const a=await b.updateSettings({settings:s});a.success?o.fire({icon:"success",title:"Settings Saved!",timer:1500,showConfirmButton:!1,background:"#fff",color:"#1f2937"}):o.fire({icon:"error",title:"Error",text:a.message,background:"#fff",color:"#1f2937"}),i(!1)},j=[{id:"profile",label:"Profile",icon:"ri-user-line"},{id:"password",label:"Password",icon:"ri-lock-line"},{id:"platform",label:"Platform",icon:"ri-settings-line"}];return e.jsx(v,{pageTitle:"Settings",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:"Settings"}),e.jsx("div",{className:"flex gap-1 bg-white dark-theme:bg-gray-900 rounded-xl p-1 border border-sand dark-theme:border-gray-800 w-fit",children:j.map(r=>e.jsxs("button",{onClick:()=>p(r.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${u===r.id?"bg-primary text-white":"text-gray-500 hover:bg-gray-50 dark-theme:hover:bg-gray-800"}`,children:[e.jsx("i",{className:r.icon}),r.label]},r.id))}),u==="profile"&&e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 border border-sand dark-theme:border-gray-800 max-w-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100 mb-5",children:"Profile Information"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:n.fullName,onChange:r=>g({...n,fullName:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:n.email,disabled:!0,className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 outline-none text-sm opacity-60 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:n.phone,onChange:r=>g({...n,phone:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsx("button",{type:"submit",disabled:l,className:"px-6 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark disabled:opacity-60",children:l?"Saving...":"Save Changes"})]})]}),u==="password"&&e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 border border-sand dark-theme:border-gray-800 max-w-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100 mb-5",children:"Change Password"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",required:!0,value:t.currentPassword,onChange:r=>x({...t,currentPassword:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"New Password"}),e.jsx("input",{type:"password",required:!0,value:t.newPassword,onChange:r=>x({...t,newPassword:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",required:!0,value:t.confirmPassword,onChange:r=>x({...t,confirmPassword:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsx("button",{type:"submit",disabled:l,className:"px-6 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark disabled:opacity-60",children:l?"Changing...":"Change Password"})]})]}),u==="platform"&&e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 border border-sand dark-theme:border-gray-800 max-w-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100 mb-5",children:"Platform Settings"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Site Name"}),e.jsx("input",{type:"text",value:s.siteName||"Sowberry",onChange:r=>c({...s,siteName:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Support Email"}),e.jsx("input",{type:"email",value:s.supportEmail||"",onChange:r=>c({...s,supportEmail:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Max Students Per Course"}),e.jsx("input",{type:"number",value:s.maxStudentsPerCourse||100,onChange:r=>c({...s,maxStudentsPerCourse:r.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s.maintenanceMode==="true"||s.maintenanceMode===!0,onChange:r=>c({...s,maintenanceMode:r.target.checked?"true":"false"}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("label",{className:"text-sm text-gray-600 dark-theme:text-gray-400",children:"Maintenance Mode"})]}),e.jsx("button",{type:"submit",disabled:l,className:"px-6 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark disabled:opacity-60",children:l?"Saving...":"Save Settings"})]})]})]})})};export{C as default};
