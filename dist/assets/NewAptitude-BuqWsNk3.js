import{r as i,j as e,m as u,S as x,g as p}from"./index-Ci2oCG6z.js";import{A as v}from"./AdminLayout-DUJX2VlJ.js";const A=()=>{const[d,h]=i.useState([]),[b,g]=i.useState(!0),[y,l]=i.useState(!1),[r,n]=i.useState({title:"",description:"",duration:30,totalMarks:100,isPublished:!1,questions:[{question:"",optionA:"",optionB:"",optionC:"",optionD:"",correctOption:"A",marks:1}]}),c=async()=>{g(!0);const t=await u.getAptitudeTests();t.success&&h(t.tests||[]),g(!1)};i.useEffect(()=>{c()},[]);const f=()=>{n({...r,questions:[...r.questions,{question:"",optionA:"",optionB:"",optionC:"",optionD:"",correctOption:"A",marks:1}]})},o=(t,a,s)=>{const m=[...r.questions];m[t]={...m[t],[a]:s},n({...r,questions:m})},j=t=>{r.questions.length<=1||n({...r,questions:r.questions.filter((a,s)=>s!==t)})},N=async t=>{t.preventDefault();const a={...r,totalQuestions:r.questions.length},s=await u.createAptitudeTest(a);s.success?(x.fire({...p(),icon:"success",title:"Test Created!",timer:1500,showConfirmButton:!1}),l(!1),c()):x.fire({...p(),icon:"error",title:"Error",text:s.message})},k=t=>{x.fire({...p(),title:"Delete Test?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",confirmButtonText:"Delete"}).then(async a=>{a.isConfirmed&&(await u.deleteAptitudeTest(t),c())})};return e.jsxs(v,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark-theme:text-gray-100",children:"Aptitude Tests"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[d.length," tests"]})]}),e.jsxs("button",{onClick:()=>{n({title:"",description:"",duration:30,totalMarks:100,isPublished:!1,questions:[{question:"",optionA:"",optionB:"",optionC:"",optionD:"",correctOption:"A",marks:1}]}),l(!0)},className:"px-4 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark flex items-center gap-2",children:[e.jsx("i",{className:"ri-add-line"}),"New Test"]})]}),b?null:d.length===0?e.jsxs("div",{className:"text-center py-20 text-gray-400",children:[e.jsx("i",{className:"ri-question-answer-line text-4xl mb-3 block"}),e.jsx("p",{children:"No aptitude tests yet"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:d.map(t=>e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-5 border border-sand dark-theme:border-gray-800 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx("i",{className:"ri-question-answer-line text-primary"})}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${t.isPublished?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:t.isPublished?"Published":"Draft"})]}),e.jsx("h3",{className:"font-semibold text-gray-800 dark-theme:text-gray-100 text-sm mb-1",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 mb-3",children:t.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[e.jsxs("span",{children:[e.jsx("i",{className:"ri-time-line mr-1"}),t.duration," min"]}),e.jsxs("span",{children:[e.jsx("i",{className:"ri-file-list-line mr-1"}),t.totalQuestions," Q"]}),e.jsxs("span",{children:[e.jsx("i",{className:"ri-medal-line mr-1"}),t.totalMarks," marks"]})]}),e.jsxs("button",{onClick:()=>k(t.id),className:"w-full py-2 rounded-xl bg-red-50 dark-theme:bg-red-900/20 text-red-600 text-xs font-medium hover:bg-red-100",children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Delete"]})]},t.id))})]}),y&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white dark-theme:bg-gray-900 rounded-2xl p-6 w-full max-w-2xl mx-4 border border-sand dark-theme:border-gray-800 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark-theme:text-gray-100",children:"Create Aptitude Test"}),e.jsx("button",{onClick:()=>l(!1),className:"w-8 h-8 rounded-lg hover:bg-gray-100 flex items-center justify-center",children:e.jsx("i",{className:"ri-close-line text-lg text-gray-500"})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Test Title",required:!0,value:r.title,onChange:t=>n({...r,title:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("textarea",{placeholder:"Description",rows:2,value:r.description,onChange:t=>n({...r,description:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm resize-none"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"number",placeholder:"Duration (minutes)",value:r.duration,onChange:t=>n({...r,duration:parseInt(t.target.value)||30}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"}),e.jsx("input",{type:"number",placeholder:"Total Marks",value:r.totalMarks,onChange:t=>n({...r,totalMarks:parseInt(t.target.value)||100}),className:"w-full px-4 py-2.5 rounded-xl bg-cream dark-theme:bg-gray-800 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-sm"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.isPublished,onChange:t=>n({...r,isPublished:t.target.checked}),className:"rounded border-gray-300 text-primary"})," Publish"]}),e.jsxs("div",{className:"border-t border-sand dark-theme:border-gray-800 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 dark-theme:text-gray-300 text-sm",children:["Questions (",r.questions.length,")"]}),e.jsxs("button",{type:"button",onClick:f,className:"text-xs text-primary hover:underline flex items-center gap-1",children:[e.jsx("i",{className:"ri-add-line"}),"Add Question"]})]}),r.questions.map((t,a)=>e.jsxs("div",{className:"bg-cream dark-theme:bg-gray-800 rounded-xl p-4 mb-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-500",children:["Q",a+1]}),e.jsx("button",{type:"button",onClick:()=>j(a),className:"text-xs text-red-400 hover:text-red-600",children:e.jsx("i",{className:"ri-close-line"})})]}),e.jsx("input",{type:"text",placeholder:"Question",required:!0,value:t.question,onChange:s=>o(a,"question",s.target.value),className:"w-full px-3 py-2 rounded-lg bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-xs"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",placeholder:"Option A",required:!0,value:t.optionA,onChange:s=>o(a,"optionA",s.target.value),className:"px-3 py-2 rounded-lg bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-xs"}),e.jsx("input",{type:"text",placeholder:"Option B",required:!0,value:t.optionB,onChange:s=>o(a,"optionB",s.target.value),className:"px-3 py-2 rounded-lg bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-xs"}),e.jsx("input",{type:"text",placeholder:"Option C",required:!0,value:t.optionC,onChange:s=>o(a,"optionC",s.target.value),className:"px-3 py-2 rounded-lg bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-xs"}),e.jsx("input",{type:"text",placeholder:"Option D",required:!0,value:t.optionD,onChange:s=>o(a,"optionD",s.target.value),className:"px-3 py-2 rounded-lg bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 focus:border-primary outline-none text-xs"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:t.correctOption,onChange:s=>o(a,"correctOption",s.target.value),className:"px-3 py-2 rounded-lg bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 outline-none text-xs",children:[e.jsx("option",{value:"A",children:"Correct: A"}),e.jsx("option",{value:"B",children:"Correct: B"}),e.jsx("option",{value:"C",children:"Correct: C"}),e.jsx("option",{value:"D",children:"Correct: D"})]}),e.jsx("input",{type:"number",placeholder:"Marks",value:t.marks,onChange:s=>o(a,"marks",parseInt(s.target.value)||1),className:"w-20 px-3 py-2 rounded-lg bg-white dark-theme:bg-gray-900 border border-sand dark-theme:border-gray-700 outline-none text-xs"})]})]},a))]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-2.5 rounded-xl border border-sand text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 py-2.5 rounded-xl bg-primary text-white text-sm font-medium hover:bg-primary-dark",children:"Create Test"})]})]})]})})]})};export{A as default};
